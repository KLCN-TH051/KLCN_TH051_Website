@{
    Layout = "_LessonLayout";
}
<div class="row">
    <!-- SIDEBAR -->
    <div class="col-3 border-end bg-white 100vh overflow-auto">
        <ul class="list-group list-group-flush mt-2">
            <!-- CHƯƠNG 1 - Đã hoàn thành -->
            <li class="list-group-item p-0">
                <div class="p-2 text-success" data-bs-toggle="collapse" data-bs-target="#chapter1">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    <strong>Chương 1: Tên chương</strong>
                </div>

                <div id="chapter1" class="collapse show">
                    <ul class="list-group list-group-flush ms-3">

                        <!-- Bài 1 -->
                        <li class="list-group-item text-success lesson-item" data-id="lesson">
                            <i class="bi bi-check-circle-fill me-2"></i>
                            Bài 1: Tên bài
                        </li>
                    </ul>
                </div>
            </li>
            <!-- CHƯƠNG 2 -->
            <li class="list-group-item p-0">
                <div class="p-2" data-bs-toggle="collapse" data-bs-target="#chapter2">
                    <strong>Javascript Cơ bản</strong>
                </div>

                <div id="chapter2" class="collapse">
                    <ul class="list-group list-group-flush ms-3">
                        <li class="list-group-item lesson-item" data-id="video">
                            <i class="bi bi-play-circle me-2"></i>
                            Bài 1: Video
                        </li>
                        <li class="list-group-item lesson-item" data-id="quiz">
                            <i class="bi bi-question-circle me-2"></i>
                            Bài 2: Quiz
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
    <!-- MAIN CONTENT -->
    <div class="col-9 p-3 100vh overflow-auto">
        <div class="bg-white p-3 rounded shadow-sm" id="mainContent">
            <h5 class="fw-bold">GIỚI THIỆU</h5>
            <p>
                Thành phần cơ bản của React được gọi là <b>components</b>.
                Syntax để viết HTML sử dụng Javascript để render. Bạn có thể tạo
                ra một component bằng các gọi phương thức createClass của đối tượng React.
            </p>
            <p>
                Có thể lồng nhiều component vào nhau thông qua lệnh return của phương thức render.
            </p>
        </div>
        <button class="btn btn-primary mt-3">Bài sau</button>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {

        const lessonItems = document.querySelectorAll(".lesson-item");
        const mainContent = document.getElementById("mainContent");

        // Nội dung các bài
        const lessonsContent = {
            lesson: `
                <h5 class="fw-bold">Bài 1: Giới thiệu React</h5>
                <p>React là một thư viện JavaScript mạnh mẽ dùng để xây dựng giao diện người dùng...</p>
            `,
            video: `
                <h5 class="fw-bold">Bài 1: Video</h5>
                <video id="videoPreview" controls style="width:100%;background:#000;">
                    <source src="" type="video/mp4" />
                </video>
            `,
            quiz: `
                <h5 class="fw-bold">Bài 2: Câu hỏi Javascript cơ bản</h5>

                <form id="quizForm">

                    <!-- Câu 1 -->
                    <div class="mb-3">
                        <label class="form-label">1. JavaScript là gì?</label>
                        <div><input type="radio" name="question1" value="A"> Ngôn ngữ lập trình web</div>
                        <div><input type="radio" name="question1" value="B"> Hệ điều hành</div>
                        <div><input type="radio" name="question1" value="C"> Ngôn ngữ lập trình hệ thống</div>
                    </div>

                    <!-- Câu 2 -->
                    <div class="mb-3">
                        <label class="form-label">2. 'let', 'const', 'var' dùng để khai báo gì?</label>
                        <div><input type="checkbox" name="question2" value="A"> Biến</div>
                        <div><input type="checkbox" name="question2" value="B"> Hằng số</div>
                        <div><input type="checkbox" name="question2" value="C"> Hàm</div>
                        <div><input type="checkbox" name="question2" value="D"> Số âm</div>
                    </div>

                    <button type="button" class="btn btn-primary" id="submitQuiz">Nộp bài</button>
                </form>

                <div id="quizResult" class="mt-3"></div>
            `
        };

        // Click chọn bài học
        lessonItems.forEach(item => {
            item.addEventListener("click", function () {

                const lessonId = item.getAttribute("data-id");
                mainContent.innerHTML = lessonsContent[lessonId] || "Chưa có nội dung.";

                // Nếu bài là quiz -> gắn sự kiện nộp bài
                if (lessonId === "quiz") {
                    attachQuizHandler();
                }
            });
        });

        // ======================
        // HÀM XỬ LÝ QUIZ
        // ======================
        function attachQuizHandler() {

            const submitBtn = document.getElementById("submitQuiz");
            const resultDiv = document.getElementById("quizResult");

            submitBtn.addEventListener("click", function () {

                let score = 0;

                // Đáp án đúng
                const answers = {
                    question1: "A",            // radio
                    question2: ["A", "B", "C"] // checkbox
                };

                // Lấy câu 1
                const q1 = document.querySelector('input[name="question1"]:checked')?.value;

                // Lấy câu 2 (checkbox)
                const q2 = Array.from(document.querySelectorAll('input[name="question2"]:checked'))
                                .map(c => c.value);

                // Kiểm tra câu 1
                if (q1 === answers.question1) score++;

                // Kiểm tra câu 2: mảng phải trùng 100%
                if (JSON.stringify(q2.sort()) === JSON.stringify(answers.question2.sort())) score++;

                // Hiển thị kết quả
                resultDiv.style.display = "none";
                setTimeout(() => {
                    resultDiv.innerHTML = `Bạn đã trả lời đúng ${score} / 2 câu.`;
                    resultDiv.style.display = "block";
                    resultDiv.classList.add("fade-in");
                }, 200);
            });
        }

    });
</script>
